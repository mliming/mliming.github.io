<html>
<head>
    <meta charset="utf-8">
    <title>PlayCanvas Helffdlo Cube</title>
    <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no' />
    <script src='MasterMindLog.js'></script>
    <link rel="stylesheet" type="text/css" href="MasterMindCSS.css">
</head>
<body id='bdyP'>
    <div id='sps' class='divSec'>
        <p>Available Letters: b g r y w l</p>
        <input id='GuessBox' type=text spellcheck="false" oninput="ConGuess()">
    </div>
    <div id='butDivO' class='divSec'>
        <select id='lenCode'>
            <option>4 - letter secret code</option>
            <option>5 - letter secret code</option>
            <option>6 - letter secret code</option>
        </select>
    </div>
    <div id='butDivO' class='divSec'>
        <button id='evaGues' onclick="CheckGuess()" disabled>Guess</button>
    </div>
    <div id='butDivT' class='divSec'>
        <button id='staGame' onclick="BeginGame()">Start Game</button>
    </div>
    <div id='butDivT' class='divSec'>
        <button id='revCode' onclick="RevealCode()" disabled>Reveal Code</button>
    </div>
    <div id='guessPart'></div>
    <div id='codePart' class='divSec'></div>
    </body>
    <script>

        var MasterLog = new MasterMindlog();

        function BeginGame() {

            MasterLog.codeLeng = parseInt(lenCode.value);
            MasterLog.GenerateCode();
            MasterLog.GetNumOfColorsCode();

            this.SetBeginSettings();

            RemoveGuesses();

        }

        function CheckGuess() {

            var text;
            var guessEl = document.getElementById('GuessBox');
            var codReEl = document.getElementById('codePart');
            var parEl = document.createElement('p');
            var parEW = document.createElement('p');


            var guessDis;
            MasterLog.guess = guessEl.value;
            //guessDis = MasterLog.GenerateGuessStr();
            MasterLog.CopyNumCodeToGuess();
            //parEl.innerHTML = MasterLog._RandCode + " : " + MasterLog._GuessCdN;
            MasterLog.GetBlackReturns();
            MasterLog.GetWhiteReturns();

            parEl.innerHTML = guessDis + " : " + MasterLog._GuessCdR;

            AddGuessPar();
            if (MasterLog.codeMatc) {

                text = "You guessed the code in ";
                text = text + MasterLog.guessNum;
                text = text + " moves";

                codReEl.innerHTML = text;
                this.SetNewGameSettings();
                RemoveGuesses();

            }

            //bdyEl.appendChild(parEl);

            MasterLog.ClearGuessResult();



        }



        function ConGuess() {

            var evalGues = document.getElementById('evaGues');
            var guessBox = document.getElementById('GuessBox');
            var guess = guessBox.value;

            if (guess.length == MasterLog._RandCode.length)
                evalGues.disabled = false;
            else
                evalGues.disabled = true;

        }

        function AddGuessPar() {

            var guessDis;
            var resulDis;
            var parEl = document.createElement('p');
            var bdyEl = document.getElementById('guessPart');

            guessDis = MasterLog.GenerateGuessStr();
            resulDis = MasterLog.GenerateResultStr();

            parEl.id = "GuessP" + MasterLog.guessNum;
            parEl.innerHTML = guessDis + resulDis;
            MasterLog.guessNum = MasterLog.guessNum + 1;

            bdyEl.appendChild(parEl);

        }

        function RemoveGuesses() {

            var guess;
            var bdyEl = document.getElementById('guessPart');

            for (var i = 0; i < MasterLog.guessNum; i++) {

                guess = document.getElementById('GuessP' + i);
                bdyEl.removeChild(guess);

            }

            MasterLog.guessNum = 0;
        }

        function RevealCode() {

            var code;
            var lenCode = document.getElementById('lenCode');
            var staGame = document.getElementById('staGame');

            var parEl = document.createElement('p');
            var codReEl = document.getElementById('codePart');

            lenCode.disabled = false;
            staGame.disabled = false;

            code = "The code was: ";

            for (var i = 0; i < MasterLog._RandCode.length; i++) {

                code += " " + MasterLog._RandCode[i];

            }

            this.SetNewGameSettings();

            parEl.innerHTML = code;
            codReEl.appendChild(parEl);

        }

        function SetBeginSettings() {

            var lenCode = document.getElementById('lenCode');
            var staGame = document.getElementById('staGame');
            var evaGues = document.getElementById('evaGues');
            var revGues = document.getElementById('revCode');

            lenCode.disabled = true;
            staGame.disabled = true;
            evaGues.disabled = false;
            revGues.disabled = false;

        }

        function SetNewGameSettings() {

            var lenCode = document.getElementById('lenCode');
            var staGame = document.getElementById('staGame');
            var evaGues = document.getElementById('evaGues');
            var revGues = document.getElementById('revCode');

            MasterLog.guessNum = 0;
            MasterLog.codeMatc = false;

            lenCode.disabled = false;
            staGame.disabled = false;
            evaGues.disabled = true;
            revGues.disabled = true;

        }

    </script>
</html>
